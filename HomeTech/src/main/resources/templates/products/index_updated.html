<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${title != null ? title : 'HomeTech'}">HomeTech</title>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <!-- Bootstrap & FontAwesome -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">

    <style th:replace="~{../style/common :: style}"></style>
</head>
<body>

<!-- Header from home.html -->
<header class="premium-header">
    <div class="container">
        <div class="d-flex flex-wrap align-items-center justify-content-between gap-3">
            <a class="brand-logo" href="/">HomeTech</a>
            <div class="d-flex align-items-center gap-2">
                <a href="/" class="btn-premium-outline">
                    <i class="fas fa-home"></i> Trang chủ
                </a>
                <a href="/products" class="btn-premium-outline">
                    <i class="fas fa-box"></i> Sản phẩm
                </a>
                <a href="/cart" class="btn-premium-outline">
                    <i class="fas fa-shopping-cart"></i> Giỏ hàng
                </a>
            </div>
        </div>
    </div>
</header>

<div class="container">
    <!-- Header Section -->
    <div class="mb-5">
        <h1 class="section-title">
            <i class="fas fa-box text-premium-cyan"></i>
            <span th:text="${title}">Tất cả sản phẩm</span>
        </h1>
        <p class="text-premium-muted">Khám phá các sản phẩm điện tử chất lượng cao</p>
    </div>

    <!-- Category Filter -->
    <div class="category-filter-panel mb-4">
        <div class="d-flex flex-wrap gap-2">
            <a href="/products" class="category-pill">
                <i class="fas fa-globe"></i> Tất cả
            </a>
            <a th:each="category : ${categories}" 
               th:href="@{/products/category/{id}(id=${category.categoryID})}"
               th:text="${category.categoryName}"
               class="category-pill"></a>
        </div>
    </div>

    <!-- Products Grid -->
    <div class="product-grid" th:if="${listProducts != null and !listProducts.empty}">
        <div class="product-card" th:each="product, iterStat : ${listProducts}">
            <div class="product-image-container">
                <img th:if="${product.image != null}" 
                     th:src="'data:image/jpeg;base64,' + ${#strings.replace(#arrays.toString(product.image), '[', '')}"
                     th:alt="${product.productName}"
                     class="product-image">
                <img th:unless="${product.image != null}"
                     src="https://via.placeholder.com/300x200?text=No+Image"
                     th:alt="${product.productName}"
                     class="product-image">
                
                <span th:if="${product.status}" 
                      class="badge-premium position-absolute top-0 end-0 m-2">
                    <i class="fas fa-check"></i> Hoạt động
                </span>
                <span th:unless="${product.status}" 
                      class="badge bg-secondary position-absolute top-0 end-0 m-2">
                    <i class="fas fa-pause"></i> Tạm dừng
                </span>
            </div>

            <div class="product-info">
                <h6 class="product-name" th:text="${product.productName}">Tên sản phẩm</h6>
                
                <div class="mb-2">
                    <span class="badge-premium" th:text="${product.category?.categoryName}">Danh mục</span>
                </div>
                
                <p class="text-premium-muted mb-2" th:text="${product.description}">Mô tả sản phẩm</p>
                
                <div class="mb-2">
                    <small class="text-premium-muted">
                        <i class="fas fa-palette"></i> Màu: <span th:text="${product.color}">N/A</span>
                    </small><br>
                    <small class="text-premium-muted">
                        <i class="fas fa-expand-arrows-alt"></i> Kích thước: <span th:text="${product.size}">N/A</span>
                    </small>
                </div>

                <div class="product-price text-premium-cyan" th:text="${#numbers.formatDecimal(product.price, 0, 'COMMA', 0, 'POINT')} + ' VNĐ'">0 VNĐ</div>
                
                <div class="btn-group-premium mt-3">
                    <a th:href="@{/products/{id}(id=${product.productID})}" 
                       class="btn-view-detail">
                        <i class="fas fa-eye"></i> Xem
                    </a>
                    <a th:href="@{/products/edit/{id}(id=${product.productID})}" 
                       class="btn-premium-outline btn-sm">
                        <i class="fas fa-edit"></i>
                    </a>
                    <a th:href="@{/products/delete/{id}(id=${product.productID})}" 
                       class="btn-danger-premium btn-sm"
                       onclick="return confirm('Bạn có chắc muốn xóa?')">
                        <i class="fas fa-trash"></i>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Empty State -->
    <div class="text-center py-5" th:if="${listProducts == null or listProducts.empty}">
        <i class="fas fa-box-open fa-5x text-premium-muted mb-3"></i>
        <h3 class="text-premium-muted">Không có sản phẩm nào</h3>
        <p class="text-premium-muted">Hãy thêm sản phẩm đầu tiên của bạn!</p>
        <a href="/products/new" class="btn-premium mt-3">
            <i class="fas fa-plus"></i> Thêm sản phẩm
        </a>
    </div>
</div>

<!-- Footer -->
<footer class="premium-footer">
    <p>© 2025 HomeTech. All rights reserved.</p>
</footer>

</body>
</html>




